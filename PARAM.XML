<!-- The syntax is described by share/Scripts/CheckParam.pl and the manual -->

<commandList name="CIMI: IM Component">

List of IM commands used in the PARAM.in file

<set name="NameRestartOutDir" type="string" value="$_NameComp/restartOUT"/>
<set name="NamePlotDir"       type="string" value="$_NameComp/plots"/>

<commandgroup name="NUMERICAL SCHEME">

<command name="LIMITER">
	<parameter name="UseMcLimiter" type="logical" default="F"/>
	<parameter name="BetaLimiter"  type="real" min="1" max="2" default="2"/>
	
#LIMITER
F			UseMcLimiter
2			BetaLimiter

Set whether or not the MC limiter is used. If it is not, the super bee
limiter is used. Also set the Beta parameter for the MC limiter.  The
default value is shown.
</command>

<command name="TIMESIMULATION">
	<parameter name="TimeSimulation" type="real" min="0"/>

#TIMESIMULATION
0.0		TimeSimulation

This command specifies the simulation time. 
</command>


</commandgroup>

<commandgroup name="INPUT/OUTPUT">

<command name="SAVEPLOT">
	<parameter name="DtSavePlot" type="real" />
	<parameter name="DoSaveFlux" type="logical" default="F"/>
	<parameter name="UseSeparatePlotFiles" type="logical" default="F"/>
#SAVEPLOT
2		DtSavePlot
F		DoSaveFlux
F		UseSeparatePlotFiles

Define frequency of plots. When DoSaveFlux is false, only integrated
values such as species pressure density etc is saved. When DoSaveFlux
is true, then another file containing information needed to make plots
of species flux in each energy bin is saved. Use SeparatePlotFiles
defines if each time is saved in the same file or if a separate file
is used for each time.
</command>

<command name="SAVELOG">
	<parameter name="DtLogOut" type="real" />
#SAVELOG
10		DtSaveLog

When this command is set, a log file for CIMI is written out. The log
file saves the change in ring current energy content for each species
resulting from each operator. A new entry in the log is written out
every DtSaveLog seconds of simulation time.
</command>

<command name="TYPEBOUNDARY">
	<parameter name="TypeBoundary" type="string" />

#TYPEBOUNDARY
Ellipse		TypeBoundary

Determines if the IM outer boundary is an 'Ellipse' or 'Circle.'
Default shown.
</command>

<command name="MINIMUMPRESSURETOGM">
	<parameter name="MinimumPressureToGM" type="real" />

#MINIMUMPRESSURETOGM
1e-2		MinimumPressureToGM

Sets minimum pressure passed to GM.
</command>


<command name="RESTART">
	<parameter name="IsRestart" type="logical" />

#RESTART
F		IsRestart

Determine whether or not to continue a previous run.
</command>

<command name="INITIALF2">
	<parameter name="IsEmptyF2" type="logical" />
	<parameter name="IsGMInitial" type="logical" />
	<parameter name="IsDataInitial" type="logical" />

#INITIALF2
F			IsEmptyF2
T			IsGmInitial
F			IsDataInitial

Determines whether to fill the fluxes in the simulation domain based
on a Maxwellian determined from MHD quantities (IsGmInitial=T) or to
set the initial fluxes in the simulation domain to zero (IsEmptyF2=T,
not recommended) or to set the initial fluxes in the simulation to
values from AMPTE/CCE data (IsDataInitial=T). The default is shown.
</command>

<command name="END">

#END

The #END command signals the end of the included file or the end of
the PARAM.in file. Lines following the #END command are ignored. It is
not required to use the #END command. The end of the included file or
PARAM.in file is equivalent with an #END command in the last line.
</command>

<command name="ENERGYGRID">
	<parameter name="MinIonEnergy" type="real" />
	<parameter name="MaxIonEnergy" type="real" />

#ENERGYGRID
  0.10000	MinIonEnergy (in keV)
316.22777	MaxIonEnergy (in keV)

DEPRECATED - Command sets the minimum and maximum of the ion energy
grid for the output fluxes. MinIonEnergy and MaxIonEnergy are the
bounds for the energy array in keV; electron energies are multiplied
by 10.  Results in a 15 element grid per species that is evenly spaced
logarithmically. Parameter included for backwards compatibility. For
more direct control over the grid, use #SETENERGYGRID command.
</command>

<command name="SETENERGYGRID">
	<parameter name="neng" type="integer" />
	<parameter name="UseLogEGrid" type="logical" />
  	<parameter name="MinIonEnergy" type="real" />
	<parameter name="MaxIonEnergy" type="real" />

#SETENERGYGRID
15		neng
T	        UseLogEGrid
  0.10000	MinIonEnergy (in keV)
316.22777	MaxIonEnergy (in keV)

Command provides user with direct control over the size, spacing, and
energy extent of the ion energy grid for the output fluxes.  neng is
the number of elements in the energy grid per species. UseLogEGrid=T
sets logarithmic spacing to the grid; setting UseLogEGrid=F changes it
to linearly spaced. MinIonEnergy and MaxIonEnergy are the bounds for
the energy array in keV; electron energies are multiplied by 10. The
values displayed here result in CIMI's default energy grid regardless
of #SETENERGYGRID being specified in PARAM.in.
</command>

<command name="RBSPENERGYGRID">
  	<parameter name="UseRBSPGrid" type="logical" default="F"/>

#RBSPENERGYGRID
F		UseRBSPGrid

Command sets the output energy grid to exactly the energy centroids of
the Van Allen Probes' MagEIS and REPT instruments. If this parameter
is set, the #ENERGYGRID and #SETENERGYGRID commands are
ignored. Default shown.

</command>

</commandgroup>

<commandgroup name="PHYSICS PARAMETERS">

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!! PHYSICS PARAMETERS  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

<command name="STRONGDIFFUSION">
  <parameter name="UseStrongDiff" type="logical" default="F"/>
  
#STRONGDIFFUSION
F			UseStrongDiff

Applies very effective exponential decay of ring current and radiation
belt electron populations.  Diffusion time is first (mu) and second
(K) adiabatic invariant dependent.  Can result in electrons being lost
by up to 50\%.

Default is UseStrongDiff is false.
	
</command>	

<command name="DECAY">
	<parameter name="UseDecay" type="logical" default="F"/>
	<if expr="$UseDecay">
		<parameter name="DecayTimescale"   type="real" min="0"
						   default="36000."/>
	</if>

#DECAY
T			UseDecay
36000.  		DecayTimescale in seconds

If UseDecay is true, adds exponential decay to ring current ion
populations, so that if there are no other effects, ion phase space
density (PSD) decays proportional to \begin{verbatim}
exp(-(deltaT/DecayTimescale)) \end{verbatim} This ad hoc decay can
improve agreement with observed recovery after magnetic storms.  The
default DecayTimescale value of 10 hours as above seems to be close to
optimal.  The decay term is NOT applied to the electron PSD since both
ring current and radiation belt electrons are represented.  Rapid loss
of electron PSD is controlled with the #STRONGDIFFUSION routine.

The default is UseDecay false.
</command>

</commandgroup>

</commandList>
